**å®Œæ•´æè¿°ä¸€ä¸ªè½»é‡ã€å…¬å¹³ã€å¯æ‰©å±•çš„æ–‡å­—ä¿®ä»™æˆ˜æ–—è§„åˆ™å¼•æ“**ï¼ŒåŒ…æ‹¬ï¼š

1. **è§’è‰²å¿…é¡»å…·å¤‡çš„æ ¸å¿ƒå±æ€§ï¼ˆæ•°æ®ç»“æ„ï¼‰**
2. **æˆ˜æ–—æµç¨‹çš„ä¼ªä»£ç å®ç°**
3. **å…³é”®æœºåˆ¶è¯´æ˜ï¼ˆå…‹åˆ¶ã€é€Ÿåº¦ã€æŠ€èƒ½æ•ˆæœç­‰ï¼‰**
4. **å¦‚ä½•ä¸ AIGC ååŒï¼ˆæˆ˜æŠ¥ç”Ÿæˆï¼‰**

æ•´ä¸ªè®¾è®¡ç›®æ ‡æ˜¯ï¼š**ç”¨æœ€å°‘çš„ä»£ç ï¼ˆçº¦ 50 è¡Œæ ¸å¿ƒé€»è¾‘ï¼‰æ”¯æ’‘ä¸€åœºç­–ç•¥æ€§å¯¹æˆ˜ï¼Œå…¶ä½™äº¤ç»™ AIGC ç”Ÿæˆæ²‰æµ¸å¼ä½“éªŒ**ã€‚

---

## ä¸€ã€è§’è‰²å¿…é¡»å…·å¤‡çš„æ ¸å¿ƒå±æ€§ï¼ˆæˆ˜æ–—æ‰€éœ€æœ€å°æ•°æ®é›†ï¼‰

ä¸ºäº†è®©æˆ˜æ–—ç³»ç»Ÿèƒ½è¿è¡Œï¼Œæ¯ä¸ªè§’è‰²å¿…é¡»åŒ…å«ä»¥ä¸‹å­—æ®µï¼ˆå»ºè®®ä»¥ JSON å­˜å‚¨ï¼‰ï¼š

```json
{
  "name": "é›·æ— å’",
  "level": "ç­‘åŸºåæœŸ", // ç”¨äºæˆ˜åŠ›ç³»æ•°ï¼Œéç›´æ¥å‚ä¸è®¡ç®—
  "hp": 100, // å½“å‰ç”Ÿå‘½å€¼ï¼ˆæˆ˜æ–—ä¸­åŠ¨æ€å˜åŒ–ï¼‰
  "max_hp": 100, // æœ€å¤§ç”Ÿå‘½å€¼ï¼ˆç”¨äºæ²»ç–—/å›è¡€åˆ¤æ–­ï¼‰

  "attributes": {
    "vitality": 80, // ä½“é­„ â†’ å½±å“ max_hp å’Œ ç‰©ç†æŠ—æ€§
    "spirit": 95, // çµåŠ› â†’ å½±å“æŠ€èƒ½ä¼¤å®³å’Œå‘½ä¸­
    "wisdom": 70, // æ‚Ÿæ€§ â†’ å½±å“æš´å‡»ç‡ã€æŠ€èƒ½æ•ˆæœå¼ºåº¦
    "speed": 85 // é€Ÿåº¦ â†’ å†³å®šå‡ºæ‰‹é¡ºåº
  },

  "skills": [
    {
      "name": "ç–¾é£é›·å‰‘",
      "type": "attack", // ç±»å‹ï¼šattack / heal / control / buff
      "power": 70, // åŸºç¡€å¨åŠ›ï¼ˆ0~100ï¼‰
      "cost": 20, // çµåŠ›æ¶ˆè€—ï¼ˆæš‚æ—¶å¯å¿½ç•¥ï¼Œç®€åŒ–ï¼‰
      "element": "é›·", // å…ƒç´ å±æ€§ï¼šé‡‘/æœ¨/æ°´/ç«/åœŸ/é›·/æ— 
      "effects": ["bleed"] // é™„åŠ æ•ˆæœï¼ˆå¯é€‰ï¼‰ï¼šbleed, stun, burn, heal ç­‰
    },
    {
      "name": "é›·é",
      "type": "buff",
      "power": 30,
      "element": "é›·",
      "effects": ["speed_up"]
    }
  ],

  "equipment": [
    {
      "name": "æƒŠé›·å‰‘",
      "bonus": {
        "spirit": 10,
        "é›·ç³»æŠ€èƒ½å¨åŠ›": 1.2 // ä¹˜åŒºåŠ æˆï¼ˆéœ€è§£æï¼‰
      }
    }
  ]
}
```

> ğŸ’¡ **è¯´æ˜**ï¼š
>
> - `hp` æ˜¯æˆ˜æ–—ä¸­çš„åŠ¨æ€å€¼ï¼Œåˆå§‹ä¸º `max_hp`
> - æ‰€æœ‰æ•°å€¼å»ºè®®å½’ä¸€åŒ–åˆ° **50~100 åŒºé—´**ï¼Œä¾¿äºå¹³è¡¡
> - å…ƒç´ ç³»ç»Ÿé‡‡ç”¨ **äº”è¡Œ + é›·**ï¼ˆé›·å…‹é‡‘ã€æœ¨ï¼›è¢«åœŸå…‹ï¼‰

---

## äºŒã€æˆ˜æ–—è§„åˆ™å¼•æ“ï¼ˆä¼ªä»£ç ï¼‰

### æ ¸å¿ƒå‡è®¾ï¼š

- å›åˆåˆ¶ï¼Œæ¯å›åˆåŒæ–¹å„è¡ŒåŠ¨ä¸€æ¬¡
- å…ˆæ‰‹ç”± `speed` å†³å®š
- æˆ˜æ–—æœ€å¤š 20 å›åˆï¼Œè¶…æ—¶åˆ™ hp é«˜è€…èƒœ

### ä¼ªä»£ç ï¼ˆPython é£æ ¼ï¼‰ï¼š

```python
def simulate_battle(player: Character, opponent: Character) -> BattleResult:
    # åˆå§‹åŒ–æˆ˜æ–—çŠ¶æ€
    p = player.copy()   # é¿å…ä¿®æ”¹åŸè§’è‰²
    o = opponent.copy()
    p.hp = p.max_hp
    o.hp = o.max_hp

    log = []  # æˆ˜æ–—æ—¥å¿—ï¼ˆç”¨äºåç»­ AIGC æˆ˜æŠ¥ï¼‰

    for turn in range(1, 21):  # æœ€å¤š20å›åˆ
        # 1. åˆ¤å®šå…ˆæ‰‹
        if p.attributes["speed"] >= o.attributes["speed"]:
            first, second = p, o
        else:
            first, second = o, p

        # 2. å…ˆæ‰‹è¡ŒåŠ¨
        skill1 = select_skill(first, second)
        damage1, effects1 = calculate_damage(first, second, skill1)
        apply_damage(second, damage1)
        apply_effects(second, effects1)
        log.append(f"{first.name} ä½¿ç”¨ {skill1['name']}ï¼Œé€ æˆ {damage1} ç‚¹ä¼¤å®³ï¼")

        if second.hp <= 0:
            winner = first
            break

        # 3. åæ‰‹è¡ŒåŠ¨
        skill2 = select_skill(second, first)
        damage2, effects2 = calculate_damage(second, first, skill2)
        apply_damage(first, damage2)
        apply_effects(first, effects2)
        log.append(f"{second.name} åå‡» {skill2['name']}ï¼Œé€ æˆ {damage2} ç‚¹ä¼¤å®³ï¼")

        if first.hp <= 0:
            winner = second
            break
    else:
        # è¶…æ—¶ï¼Œæ¯”è¾ƒå‰©ä½™ hp
        winner = p if p.hp > o.hp else o if o.hp > p.hp else p  # å¹³å±€é»˜è®¤å…ˆæ‰‹èƒœ

    return BattleResult(
        winner=winner.name,
        log=log,
        final_hp_p=p.hp,
        final_hp_o=o.hp
    )
```

---

### è¾…åŠ©å‡½æ•°è¯¦è§£

#### 1. `select_skill(attacker, defender)` â€”â€” æŠ€èƒ½é€‰æ‹©ç­–ç•¥

```python
def select_skill(attacker, defender):
    # ç®€åŒ–ç­–ç•¥ï¼šä¼˜å…ˆé€‰æ”»å‡»æŠ€èƒ½ï¼›è‹¥ hp < 30% ä¸”æœ‰æ²»ç–—æŠ€èƒ½ï¼Œåˆ™æ²»ç–—
    attack_skills = [s for s in attacker.skills if s["type"] == "attack"]
    heal_skills = [s for s in attacker.skills if s["type"] == "heal"]

    if attacker.hp < attacker.max_hp * 0.3 and heal_skills:
        return random.choice(heal_skills)
    elif attack_skills:
        return random.choice(attack_skills)
    else:
        return attacker.skills[0]  # fallback
```

> ğŸ”„ **æœªæ¥å¯æ‰©å±•**ï¼šè®© AIGC æ ¹æ®è§’è‰²æ€§æ ¼å†³å®šç­–ç•¥ï¼ˆå¦‚â€œç‹‚å‚²å‰‘ä¿®æ°¸ä¸é˜²å¾¡â€ï¼‰

---

#### 2. `calculate_damage(attacker, defender, skill)` â€”â€” ä¼¤å®³è®¡ç®—

```python
def calculate_damage(attacker, defender, skill):
    base_power = skill["power"]

    # 1. æ”»å‡»æ–¹åŠ æˆï¼šspirit + è£…å¤‡
    spirit = attacker.attributes["spirit"]
    for eq in attacker.equipment:
        if "spirit" in eq.get("bonus", {}):
            spirit += eq["bonus"]["spirit"]

    # 2. å…ƒç´ å…‹åˆ¶ç³»æ•°
    element_mod = get_element_modifier(skill.get("element", "æ— "), defender)

    # 3. æš´å‡»åˆ¤å®šï¼ˆæ‚Ÿæ€§å½±å“ï¼‰
    crit_rate = min(0.3, (attacker.attributes["wisdom"] - 50) / 200)  # æœ€é«˜30%
    is_crit = random.random() < crit_rate
    crit_mod = 1.5 if is_crit else 1.0

    # 4. æœ€ç»ˆä¼¤å®³å…¬å¼
    damage = (base_power * 0.6 + spirit * 0.4) * element_mod * crit_mod

    # 5. éšæœºæµ®åŠ¨ Â±10%
    damage = int(damage * random.uniform(0.9, 1.1))

    # 6. é™„åŠ æ•ˆæœï¼ˆç®€åŒ–ï¼‰
    effects = skill.get("effects", [])

    return damage, effects
```

##### å…ƒç´ å…‹åˆ¶è¡¨ï¼ˆ`get_element_modifier`ï¼‰ï¼š

```python
ELEMENT_MOD = {
    ("é›·", "é‡‘"): 1.3,
    ("é›·", "æœ¨"): 1.3,
    ("åœŸ", "é›·"): 1.3,
    ("é‡‘", "é›·"): 0.7,
    ("æœ¨", "é›·"): 0.7,
    # å…¶ä»–é»˜è®¤ 1.0
}
```

---

#### 3. `apply_damage(target, damage)`

```python
def apply_damage(target, damage):
    target.hp -= max(1, int(damage))  # è‡³å°‘æ‰£1ç‚¹
    target.hp = max(0, target.hp)
```

#### 4. `apply_effects(target, effects)`ï¼ˆç®€åŒ–ç‰ˆï¼‰

```python
def apply_effects(target, effects):
    # æœ¬ç‰ˆæœ¬æš‚ä¸å®ç°æŒç»­æ•ˆæœï¼Œä»…è®°å½•
    pass
    # æœªæ¥å¯åŠ ï¼šä¸­æ¯’æ¯å›åˆæ‰è¡€ã€çœ©æ™•è·³è¿‡å›åˆç­‰
```

---

## ä¸‰ã€æˆ˜æ–—è¾“å‡ºç»“æ„ï¼ˆä¾› AIGC ä½¿ç”¨ï¼‰

æˆ˜æ–—å¼•æ“æœ€ç»ˆè¿”å›ä¸€ä¸ªç»“æ„åŒ–ç»“æœï¼š

```python
class BattleResult:
    winner: str          # èƒœè€…åå­—
    log: List[str]       # æ¯å›åˆç®€è¦æ—¥å¿—ï¼ˆå¦‚â€œé›·æ— å’é€ æˆ42ä¼¤å®³â€ï¼‰
    final_hp_p: int      # ç©å®¶æœ€ç»ˆè¡€é‡
    final_hp_o: int      # å¯¹æ‰‹æœ€ç»ˆè¡€é‡
```

è¿™ä¸ª `log` åˆ—è¡¨å°±æ˜¯**å–‚ç»™ AIGC ç”Ÿæˆæˆ˜æŠ¥çš„åŸæ–™**ï¼

---

## å››ã€AIGC æˆ˜æŠ¥ç”Ÿæˆï¼ˆååŒç¤ºä¾‹ï¼‰

å°† `BattleResult.log` æ‹¼æ¥æˆä¸€æ®µæ‘˜è¦ï¼Œè¾“å…¥ç»™ LLMï¼š

> Promptï¼š
>
> ```
> ä½ æ˜¯ä¸€ä½ä¿®ä»™å°è¯´ä½œè€…ã€‚è¯·æ ¹æ®ä»¥ä¸‹æˆ˜æ–—æ—¥å¿—ï¼Œå†™ä¸€æ®µ200å­—å†…çš„ç²¾å½©æˆ˜æ–—æå†™ï¼Œé£æ ¼çƒ­è¡€ã€å¤é£ï¼š
>
> æ—¥å¿—ï¼š
> - é›·æ— å’ ä½¿ç”¨ ç–¾é£é›·å‰‘ï¼Œé€ æˆ 48 ç‚¹ä¼¤å®³ï¼
> - è‹çº¢è¢– åå‡» ç«å‡¤ç‡åŸï¼Œé€ æˆ 32 ç‚¹ä¼¤å®³ï¼
> - é›·æ— å’ ä½¿ç”¨ ç–¾é£é›·å‰‘ï¼Œé€ æˆ 52 ç‚¹ä¼¤å®³ï¼
> - è‹çº¢è¢– å€’ä¸‹ï¼Œé›·æ— å’è·èƒœã€‚
>
> è¦æ±‚ï¼šåŠ å…¥ç¯å¢ƒæå†™ï¼ˆå¦‚é›·äº‘å¯†å¸ƒï¼‰ã€äººç‰©ç¥æ€ã€æ‹›å¼ç‰¹æ•ˆã€‚
> ```

> LLM è¾“å‡ºï¼š
>
> > ä¹Œäº‘å‹é¡¶ï¼Œé›·éœ†æ»šæ»šã€‚é›·æ— å’çœ¸å…‰å¦‚ç”µï¼Œæ‰‹ä¸­æƒŠé›·å‰‘åˆ’ç ´é•¿ç©ºï¼Œä¸€é“é“¶è›‡ç›´å–è‹çº¢è¢–å’½å–‰ï¼è‹çº¢è¢–å¨‡å±ä¸€å£°ï¼Œèµ¤ç„°åŒ–å‡¤è¿å‡»ï¼Œå´éš¾æŒ¡é›·å¨æµ©è¡ã€‚ç¬¬äºŒå‰‘å‡ºï¼Œå¤©åœ°å¤±è‰²ï¼Œè‹çº¢è¢–é¦™æ¶ˆç‰æ®’äºé›·å…‰ä¹‹ä¸­ã€‚é›·æ— å’æ”¶å‰‘å…¥é˜ï¼Œå†·å£°é“ï¼šâ€œä¸è¿‡å¦‚æ­¤ã€‚â€

---

## äº”ã€æ€»ç»“ï¼šæˆ˜æ–—ç³»ç»Ÿæœ€å°ä¾èµ–æ¸…å•

| ç»„ä»¶         | æ˜¯å¦å¿…é¡»ç¼–ç     | è¯´æ˜                                 |
| ------------ | --------------- | ------------------------------------ |
| è§’è‰²å±æ€§ç»“æ„ | âœ… æ˜¯           | å®šä¹‰ `hp`, `attributes`, `skills` ç­‰ |
| é€Ÿåº¦åˆ¤å®š     | âœ… æ˜¯           | å†³å®šå‡ºæ‰‹é¡ºåº                         |
| ä¼¤å®³å…¬å¼     | âœ… æ˜¯           | ç¡®ä¿å…¬å¹³æ€§                           |
| å…ƒç´ å…‹åˆ¶     | âœ… æ˜¯           | å¢åŠ ç­–ç•¥æ·±åº¦                         |
| æŠ€èƒ½é€‰æ‹©é€»è¾‘ | âœ… æ˜¯ï¼ˆå¯æç®€ï¼‰ | é¿å… AI éšæœºä¹±é€‰                     |
| æˆ˜æŠ¥ç”Ÿæˆ     | âŒ å¦           | äº¤ç»™ AIGC                            |

---

åŠ å…¥ã€Œå…ˆå¤©æ°”è¿ã€æœºåˆ¶èƒ½æå¤§å¢å¼ºè§’è‰²çš„ç‹¬ç‰¹æ€§å’Œå™äº‹é­…åŠ›ï¼ŒåŒæ—¶ä¸ºæ•°å€¼æˆé•¿æä¾›åˆç†çš„éšæœºæ³¢åŠ¨ã€‚ç»“åˆä½ ä¹‹å‰çš„è®¾è®¡ï¼ˆçº¯æ–‡å­—ã€AIGC é©±åŠ¨ã€å±æ€§ç»“æ„åŒ–ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†ã€Œæ°”è¿ã€è®¾è®¡ä¸ºï¼š

- **åˆ›å»ºæ—¶éšæœºç”Ÿæˆ 3 ä¸ª**ï¼ˆå¯æ­£å¯è´Ÿï¼‰
- **ç›´æ¥å½±å“åˆå§‹å±æ€§**ï¼ˆå¦‚ vitalityã€spirit ç­‰ï¼‰å’Œ **max_hp**
- **å…·æœ‰ä¿®ä»™é£å‘³çš„åç§°ä¸æè¿°**ï¼ˆç”± AIGC ç”Ÿæˆï¼‰
- **å¯è¢«åç»­å‰§æƒ…å¼•ç”¨**ï¼ˆå¦‚â€œå¤©ç…å­¤æ˜Ÿè€…ä¸å¯åŒä¿®â€ï¼‰

---

## âœ¨ å…ˆå¤©æ°”è¿æœºåˆ¶è®¾è®¡

### æ°”è¿ç±»å‹ç¤ºä¾‹ï¼š

| æ°”è¿å       | ç±»å‹  | æ•ˆæœ                       | æè¿°                 |
| ------------ | ----- | -------------------------- | -------------------- |
| **ç´«åºœé€šæ˜** | æ­£    | spirit +15                 | å…ƒç¥æ¾„æ¾ˆï¼Œæ‚Ÿæ€§è¶…å‡¡   |
| **ä¹å¹½å¯’éª¨** | æ­£/è´Ÿ | vitality +10, speed -5     | ä½“è•´ç„é˜´ï¼Œè€å¯’å´è¿Ÿæ» |
| **å¤©ç…å­¤æ˜Ÿ** | è´Ÿ    | æ‰€æœ‰å±æ€§ -5ï¼Œä½†æš´å‡»ç‡ +10% | å‘½æ ¼å­¤ç»ï¼Œå…‹äº²å…‹å‹   |
| **äº”è¡Œé©³æ‚** | è´Ÿ    | æ‰€æœ‰å…ƒç´ æŠ€èƒ½å¨åŠ› Ã—0.8      | çµæ ¹æ··ä¹±ï¼Œéš¾ä»¥ä¸“ç²¾   |
| **é¾™è¡€é—è„‰** | æ­£    | max_hp +30, vitality +10   | ä½“å†…æµæ·Œä¸Šå¤çœŸé¾™ä¹‹è¡€ |

> ğŸ’¡ æ°”è¿æ•ˆæœåº”**åœ¨è§’è‰²åˆ›å»ºæ—¶ä¸€æ¬¡æ€§åº”ç”¨**åˆ°åŸºç¡€å±æ€§ä¸Šï¼Œæˆä¸ºè§’è‰²æ°¸ä¹…ç‰¹è´¨ã€‚

---

## ğŸ§¾ è§’è‰²åˆ›å»ºæç¤ºè¯æ¨¡æ¿ï¼ˆä¾› AIGC ä½¿ç”¨ï¼‰

ä¸ºäº†è®©å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚ Qwenï¼‰ç¨³å®šè¾“å‡ºåŒ…å«ã€Œå…ˆå¤©æ°”è¿ã€çš„ç»“æ„åŒ–è§’è‰²ï¼Œä½ éœ€è¦ä¸€ä¸ª**å¼ºçº¦æŸçš„ Prompt**ã€‚ä»¥ä¸‹æ˜¯æ¨èçš„å®Œæ•´æç¤ºè¯æ¨¡æ¿ï¼š

---

### âœ… æ¨è Promptï¼ˆå¯ç›´æ¥ç”¨äºè°ƒç”¨ LLM APIï¼‰ï¼š

```text
ä½ æ˜¯ä¸€ä½ç²¾é€šä¿®ä»™è®¾å®šçš„é€ åŒ–å¤©å°Šï¼Œè¯·æ ¹æ®ç”¨æˆ·çš„æè¿°ï¼Œåˆ›é€ ä¸€ä½ç‹¬ä¸€æ— äºŒçš„ä¿®ä»™è€…ã€‚

è¦æ±‚ï¼š
1. ä¸¥æ ¼æŒ‰ä»¥ä¸‹ JSON Schema è¾“å‡ºï¼Œä¸è¦ä»»ä½•é¢å¤–æ–‡æœ¬ã€‚
2. è§’è‰²å¿…é¡»æ‹¥æœ‰ exactly 3 ä¸ªâ€œå…ˆå¤©æ°”è¿â€ï¼Œæ¯ä¸ªæ°”è¿åŒ…å«ï¼šåç§°ï¼ˆstringï¼‰ã€ç±»å‹ï¼ˆ"å‰" æˆ– "å‡¶"ï¼‰ã€æ•ˆæœï¼ˆç®€è¦è¯´æ˜å¯¹å±æ€§çš„å½±å“ï¼‰ã€æè¿°ï¼ˆä¸€å¥å¤é£æè¿°ï¼‰ã€‚
3. æ ¹æ®æ°”è¿æ•ˆæœï¼Œè°ƒæ•´æœ€ç»ˆçš„ attributes å’Œ max_hpï¼ˆåŸºç¡€å€¼èŒƒå›´ï¼švitality/spirit/wisdom/speed âˆˆ [50, 90]ï¼›max_hp = 80 + vitality Ã— 0.5ï¼Œå†å—æ°”è¿åŠ æˆï¼‰ã€‚
4. æ‰€æœ‰æ•°å€¼å¿…é¡»ä¸ºæ•´æ•°ã€‚
5. æŠ€èƒ½è‡³å°‘2ä¸ªï¼Œå«åç§°ã€ç±»å‹ï¼ˆattack/heal/control/buffï¼‰ã€powerï¼ˆ50~100ï¼‰ã€elementï¼ˆé‡‘/æœ¨/æ°´/ç«/åœŸ/é›·/æ— ï¼‰ã€effectsï¼ˆå¯é€‰åˆ—è¡¨ï¼‰ã€‚

ç”¨æˆ·æè¿°ï¼š
"{USER_INPUT}"

è¾“å‡ºæ ¼å¼ï¼ˆJSON Schemaï¼‰ï¼š
{
  "name": "string",
  "gender": "string",
  "origin": "string",
  "personality": "string",
  "level": "string",
  "max_hp": "integer",
  "attributes": {
    "vitality": "integer",
    "spirit": "integer",
    "wisdom": "integer",
    "speed": "integer"
  },
  "pre_heaven_fates": [
    {
      "name": "string",
      "type": "å‰|å‡¶",
      "effect": "string",
      "description": "string"
    }
  ],
  "skills": [
    {
      "name": "string",
      "type": "string",
      "power": "integer",
      "element": "string",
      "effects": ["string"]
    }
  ],
  "background": "string"
}
```

---

### ğŸ“Œ ä½¿ç”¨ç¤ºä¾‹

**ç”¨æˆ·è¾“å…¥**ï¼š

> â€œä¸€ä¸ªå‡ºèº«è¾¹é™²å°æ‘çš„å°‘å¹´ï¼Œçˆ¶æ¯æ—©äº¡ï¼Œå¶ç„¶æ¡åˆ°åŠå·æ®‹ç ´å‰‘è°±ï¼Œæ€§æ ¼åšæ¯…éšå¿ï¼Œå¤©ç”Ÿå¯¹é›·ç”µæ•æ„Ÿã€‚â€

**LLM å¯èƒ½è¾“å‡ºï¼ˆèŠ‚é€‰å…³é”®éƒ¨åˆ†ï¼‰**ï¼š

```json
{
  "name": "é™ˆé»˜",
  "gender": "ç”·",
  "origin": "åŒ—è’çŸ³ village",
  "personality": "åšæ¯…éšå¿",
  "level": "ç­‘åŸºåˆæœŸ",
  "max_hp": 115,
  "attributes": {
    "vitality": 70,
    "spirit": 95,
    "wisdom": 80,
    "speed": 75
  },
  "pre_heaven_fates": [
    {
      "name": "é›·å©´è½¬ä¸–",
      "type": "å‰",
      "effect": "spirit +15, é›·ç³»æŠ€èƒ½å¨åŠ› +20%",
      "description": "å…ƒç¥ä¸­è—é›·éœ†é“ç§ï¼Œä¹ƒä¸Šå¤é›·å©´è½¬ä¸–ä¹‹å…†ã€‚"
    },
    {
      "name": "å­¤è¾°å…¥å‘½",
      "type": "å‡¶",
      "effect": "wisdom -5, æ— æ³•è·å¾—é“ä¾£å¢ç›Š",
      "description": "å‘½å¸¦å­¤è¾°ï¼Œä¸€ç”Ÿéš¾é‡çœŸå¿ƒé“ä¾£ã€‚"
    },
    {
      "name": "è‰è½é¾™æ°”",
      "type": "å‰",
      "effect": "vitality +10, max_hp +20",
      "description": "è™½å‡ºèº«å¾®æœ«ï¼Œå´æœ‰æ½œé¾™ä¹‹å§¿ï¼Œä½“é­„å¼‚äºå¸¸äººã€‚"
    }
  ],
  ...
}
```

> ğŸ” æ³¨æ„ï¼š`max_hp = 80 + 70Ã—0.5 = 115`ï¼Œå†åŠ ä¸Šâ€œè‰è½é¾™æ°”â€+20 â†’ æœ€ç»ˆ `max_hp = 135`ï¼ˆå®é™…éœ€åœ¨åç«¯äºŒæ¬¡è®¡ç®—ï¼Œæˆ–è®© LLM ç²¾ç¡®è®¡ç®—â€”â€”å»ºè®®åè€…åœ¨ Prompt ä¸­æ˜ç¡®å…¬å¼ï¼‰

---

## âš™ï¸ åç«¯å¤„ç†å»ºè®®ï¼ˆç¡®ä¿æ•°å€¼å¯é ï¼‰

è™½ç„¶è®© LLM è®¡ç®— `max_hp` å’Œå±æ€§åŠ æˆå¾ˆæ–¹ä¾¿ï¼Œä½†ä¸ºé˜²å‡ºé”™ï¼Œä½ å¯ä»¥åœ¨åç«¯åšä¸€æ¬¡**æ ¡éªŒä¸é‡ç®—**ï¼š

```python
# ä¼ªä»£ç ï¼šåç«¯æ ¡éªŒæµç¨‹
raw_char = llm_generate(prompt)
fates = raw_char["pre_heaven_fates"]

# åˆå§‹åŒ–åŸºç¡€å±æ€§ï¼ˆæ— æ°”è¿æ—¶ï¼‰
base_attrs = {"vitality": 65, "spirit": 70, "wisdom": 65, "speed": 65}

# è§£ææ°”è¿æ•ˆæœï¼ˆéœ€é¢„å®šä¹‰æ˜ å°„è¡¨ï¼‰
for fate in fates:
    if "spirit +15" in fate["effect"]:
        base_attrs["spirit"] += 15
    if "vitality +10" in fate["effect"]:
        base_attrs["vitality"] += 10
    # ... å…¶ä»–è§„åˆ™

# è®¡ç®— max_hp
max_hp = 80 + int(base_attrs["vitality"] * 0.5)
# è‹¥æ°”è¿ç›´æ¥å†™ "+20 max_hp"ï¼Œä¹Ÿå¯è§£æ

# è£å‰ªåˆ°åˆç†èŒƒå›´
for k in base_attrs:
    base_attrs[k] = max(50, min(100, base_attrs[k]))
```

> ğŸ’¡ æ›´ä¼˜é›…çš„åšæ³•ï¼šåœ¨ Prompt ä¸­è¦æ±‚ LLM **åˆ†å¼€è¾“å‡ºâ€œåŸºç¡€å±æ€§â€å’Œâ€œæ°”è¿åŠ æˆâ€**ï¼Œä½†ä¼šå¢åŠ å¤æ‚åº¦ã€‚åˆæœŸå»ºè®®è®© LLM ç›´æ¥è¾“å‡ºæœ€ç»ˆå€¼ï¼Œåç«¯åšè¾¹ç•Œè£å‰ªå³å¯ã€‚

---

## ğŸŒŸ æ°”è¿çš„é•¿æœŸä»·å€¼ï¼ˆæœªæ¥æ‰©å±•ï¼‰

- **æˆ˜æ–—ä¸­è§¦å‘**ï¼šå¦‚â€œå¤©åŠ«ä¹‹å­â€åœ¨ hp<20% æ—¶æœ‰æ¦‚ç‡å¬å”¤é›·åŠ«
- **æ’è¡Œæ¦œç§°å·**ï¼šæ‹¥æœ‰â€œç´«å¾®å¸æ˜Ÿâ€è€…å¯è·â€œå¤©å‘½ä¹‹å­â€å¤´è¡”
- **ç¤¾äº¤é™åˆ¶**ï¼šâ€œå¤©ç…å­¤æ˜Ÿâ€æ— æ³•åŠ å…¥å®—é—¨ï¼ˆå¢åŠ ç­–ç•¥å–èˆï¼‰

---

## âœ… æ€»ç»“

ä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ã€Œå…ˆå¤©æ°”è¿ã€é›†æˆæ–¹æ¡ˆï¼š

1. **Prompt æ¨¡æ¿**ï¼šå¼•å¯¼ LLM ç”Ÿæˆå« 3 ä¸ªæ°”è¿çš„ç»“æ„åŒ–è§’è‰²
2. **æ°”è¿è®¾è®¡**ï¼šå‰å‡¶åˆ†æ˜ï¼Œå½±å“å±æ€§ä¸ max_hp
3. **æ•°å€¼å®‰å…¨**ï¼šåç«¯åšç®€å•æ ¡éªŒé˜²æ­¢å¤±æ§
4. **å™äº‹å¢å¼º**ï¼šæ¯ä¸ªè§’è‰²è‡ªå¸¦å‘½è¿æ•…äº‹ï¼Œä¾¿äº AIGC åç»­ç”Ÿæˆå‰§æƒ…/æˆ˜æŠ¥

---

æ˜¯å¦éœ€è¦æˆ‘ä¸ºä½ ï¼š

- æä¾›ä¸€ä»½ **æ°”è¿æ•ˆæœå…³é”®è¯æ˜ å°„è¡¨**ï¼ˆæ–¹ä¾¿åç«¯è§£æï¼‰ï¼Ÿ
- ç”Ÿæˆ **10 ä¸ªé¢„è®¾æ°”è¿ç¤ºä¾‹**ï¼ˆå‰/å‡¶å„åŠï¼‰ï¼Ÿ
- è¾“å‡º **å®Œæ•´çš„å¯è¿è¡Œ Prompt + Python æ ¡éªŒä»£ç **ï¼Ÿ

æ¬¢è¿ç»§ç»­æ·±å…¥ï¼
